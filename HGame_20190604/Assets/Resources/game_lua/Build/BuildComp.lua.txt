--Author : Administrator
--Date   : 2018/11/20

--声明，这里声明了类名还有属性，并且给出了属性的初始值。
BuildComp = {}

--这句是重定义元表的索引，就是说有了这句，这个才是一个类。
BuildComp.__index = BuildComp

function BuildComp:LuaInit(LuaTable)
	self.LuaTable = LuaTable;
end

--构造体，构造体的名字是随便起的，习惯性改为New()
function BuildComp:New() 
    local self = {};    --初始化self，如果没有这句，那么类所建立的对象改变，其他对象都会改变
    setmetatable(self, BuildComp);  --将self的元表设定为Class
    return self;    --返回自身
end

--开始时调用
function BuildComp:Start(gameobject) 
	self.gameObject = gameobject;
	self.InterBuild = 0;
	self.Sprite = self.gameObject:GetComponent("SpriteRenderer");
end

function BuildComp:Update() 
	if gamectrl.Editor and self.Sprite~=nil and touchctrl.selectbuild~=nil and touchctrl.selectbuild.id == self.gameObject.name then
		if self.InterBuild>0 then
			self.Sprite.color = Color.New(1,0,0,1);
		else
			self.Sprite.color = Color.New(1,1,1,1);
		end
	end
end

function BuildComp:OnCollisionEnter2D(coll)
	if coll.gameObject.tag == "build" then
		self.InterBuild = self.InterBuild+1;
	end
end

function BuildComp:OnCollisionExit2D(coll)
	if  coll.gameObject.tag == "build" then
		self.InterBuild = self.InterBuild-1;
	end
end

return BuildComp
--endregion
